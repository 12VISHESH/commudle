<section id="events-show">

    <div>
      <div>
        <div>
          <% if allowed_view?(:events, :edit) %>
          <h5><%= link_to "Edit",  edit_event_path(id: @event), class: "badge badge-primary" %></h5>
          <% end %>

        </div>
        <h1>
          <%= @event.name %>
        </h1>

      </div>

      <hr>
      <div class="d-flex">
        <div class="event-timing">
          <% if @event.start_time.to_date != @event.end_time.to_date %>
          <span>
            <span><%= @event.start_time.strftime("%d-%b-%Y") %></span> <span class="badge badge-secondary badge-pill"> <%= @event.start_time.strftime('%I:%M %p') %></span> -

            <span><%= @event.end_time.strftime("%d-%b-%Y") %></span> <span class="badge badge-secondary badge-pill"> <%= @event.end_time.strftime('%I:%M %p') %></span>

          </span>
          <% else %>
          <span>
            <span><%= @event.start_time.strftime("%d-%b-%Y") %></span> <span class="badge badge-secondary badge-pill"> <%= @event.start_time.strftime('%I:%M %p') %> To <%= @event.end_time.strftime('%I:%M %p') %></span>
          </span>
          <% end %>

        </div>


      </div>
      <p class="badge badge-info badge">Seats: <%= @event.seats %></p>
      <hr class="m-0">
      <div><%= @event.description.html_safe %></div>
      <hr>



      <div class="mt-3">
        <% if allowed_view?(:events, :update_event_status) %>
        <%= render 'event_status_select', event: @event, event_statuses: @event_statuses %>
        <% end %>
      </div>


    </div>

  <% if allowed_view?(:data_form_entities, :form_responses) %>
  <div class="d-flex row .flex-wrap ">
    <div class=" p-3 m-2 col-md-3">
      <%= form_with url: create_form_set_event_path(id: @event), scope: :event_data_form_entity_group, method: 'post', remote: true do |f| %>
      <h5>Create Form Set</h5>
      <small>Something like registration form, feedback form, etc..</small>
      <div class="form-group">
        <div class="field">
          <%= f.label :name %>
          <%= f.text_field :name, class: 'form-control' %>
        </div>
        <div class="field">
          <%= f.label :registration_type %>
          <%= f.select :registration_type_id, options_for_select(RegistrationType.all.collect{|m| [m.name, m.id]}), {}, class: 'form-control' %>

        </div>
        <%= f.submit "Create Form Set", class: 'btn' %>

      </div>

      <% end %>
    </div>
    <div class=" p-2 mt-3">


      <ul class="list-group" id="form-set-list">
        <%= render partial: 'event_data_form_entity_groups/form_set', collection: @event.event_data_form_entity_groups, as: :edfeg, locals: {event: @event} %>

      </ul>



    </div>

  </div>

  <% end %>


  <div id="event-tracks-creator-<%= @event.id %>">
    <div class="card p-2 mt-2 border-info">
      <h5 class="card-header">Event Sessions/Tracks</h5>
      <% if allowed_view?(:event_location_tracks, :create) %>

      <div class="col-md-4 offset-md-4">
        <%= render 'event_location_tracks/form', event: @event, event_location_tack: @event_location_tack %>
      </div>
      <% end %>

      <div>
        <ul class="list-group d-flex flex-row justify-content-space-around flex-wrap" id="tracks-list-<%=@event.id%>">
          <% @event.event_location_tracks.each do |elt| %>
          <%= render 'events/event_location_track', event: @event, event_location_track: elt, track_slot: @track_slot %>
          <% end %>
        </ul>

      </div>

    </div>

  </div>




</section>

